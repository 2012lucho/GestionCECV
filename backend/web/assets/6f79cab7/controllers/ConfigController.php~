<?php

namespace app\modules\config\controllers;

//cargamos el modelo de configuraci贸n
use common\models\Configuracion;

use Yii;

use yii\web\Controller;
use yii\web\NotFoundHttpException;
use yii\filters\VerbFilter;

use yii\helpers\BaseJson;

class ConfigController extends Controller
{
    public function behaviors()
    {
        return [
            'verbs' => [
                'class' => VerbFilter::className(),
                'actions' => [
                    'delete' => ['post'],
                ],
            ],
        ];
    }

    public function actionIndex(){
		return $this->render('index.php');    
    }
    
	// "Action" quepermite guardar las opciones de configuraci贸n     
	public function actionGuardaop(){
		$Datos=BaseJson::decode($_REQUEST["OPC"]);
		$Valores=BaseJson::decode($_REQUEST["OPV"]);
		//recorremos las opciones de configuraci贸n y guardamos
		for($c=0;$c<sizeof($Datos);$c++){
			$modelo=configuracion::findOne($Datos[$c]);
			$modelo->valor=$Valores[$c];
			$modelo->save(false); //hay que arreglar el temita de la validaci贸n
		}
		return '1';	
	}    
}
